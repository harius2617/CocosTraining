{"version":3,"sources":["../../../../assets/Script/assets/Script/controlChar.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","isRight","isLeft","isJump","isReset","distan","firstPos","btnReset","Button","btnRight","btnLeft","btnJump","onLoad","instance","node","position","registerEvent","moveRight","bind","registerOnce","moveLeft","jump","reset","interactable","resetBtn","update","dt","scaleX","x","y","angle"],"mappings":"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","file":"controlChar.js","sourceRoot":"../../../../assets/Script","sourcesContent":["const Emitter = require('mEmitter');\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        isRight: false,\n        isLeft: false,\n        isJump: false,\n        isReset: false,\n        distan: 0,\n        firstPos: null,\n        btnReset: cc.Button,\n        btnRight: cc.Button,\n        btnLeft: cc.Button,\n        btnJump: cc.Button,\n    },\n    onLoad() {\n        Emitter.instance = new Emitter();\n        this.firstPos = this.node.position;\n        Emitter.instance.registerEvent(\"RIGHT\", this.moveRight.bind(this));\n        Emitter.instance.registerOnce(\"LEFT\", this.moveLeft.bind(this));\n        Emitter.instance.registerEvent(\"JUMP\", this.jump.bind(this));\n        Emitter.instance.registerOnce(\"RESET\", this.reset.bind(this));\n    },\n    moveRight() {\n        this.isRight = true;\n        this.btnJump.interactable = false;\n        this.btnReset.interactable = false;\n        this.btnLeft.interactable = false;\n    },\n\n    moveLeft() {\n        this.isLeft = true;\n        this.btnJump.interactable = false;\n        this.btnRight.interactable = false;\n        this.btnReset.interactable = false;\n    },\n\n    jump() {\n        this.isJump = true;\n        this.btnReset.interactable = false;\n        this.btnRight.interactable = false;\n        this.btnLeft.interactable = false;\n    },\n\n    reset() {\n        this.isReset = true;\n        this.node.position = this.firstPos;\n    },\n\n    resetBtn() {\n        this.btnJump.interactable = true;\n        this.btnRight.interactable = true;\n        this.btnLeft.interactable = true;\n        this.btnReset.interactable = true;\n    },\n\n    update(dt) {\n        if (this.isJump || this.isLeft || this.isRight) {\n            this.distan++;\n            if (this.isRight) {\n                this.node.scaleX = -1\n                this.node.x += 3;\n                if (this.distan == 100) {\n                    this.isRight = false;\n                    this.distan = 0;\n                    this.resetBtn();\n                }\n            }\n\n            if (this.isLeft) {\n                this.node.scaleX = 1\n                this.node.x -= 3;\n                if (this.distan == 100) {\n                    this.isLeft = false;\n                    this.distan = 0;\n                    this.resetBtn();\n                }\n            }\n\n            if (this.isJump) {\n                if (this.distan <= 100) {\n                    this.node.y += 2;\n                    if (this.node.y >= 80) {\n                        this.node.angle += 4.7;\n                    }\n                } else if (this.distan > 100 && this.distan < 200) {\n                    this.node.y -= 2;\n                    this.node.angle = 0;\n                } else if (this.distan == 200) {\n                    this.distan = 0;\n                    this.node.position = this.firstPos;\n                    this.isJump = false;\n                    this.resetBtn();\n                }\n            }\n        }\n    },\n});"]}