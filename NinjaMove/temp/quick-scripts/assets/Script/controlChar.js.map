{"version":3,"sources":["controlChar.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","isRight","isLeft","isJump","distan","firstPos","btnReset","Button","btnRight","btnLeft","btnJump","onLoad","instance","node","position","registerEvent","moveRight","bind","registerOnce","moveLeft","jump","reset","interactable","resetBtn","update","dt","scaleX","x","y","angle"],"mappings":"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","file":"controlChar.js","sourceRoot":"../../../../assets/Script","sourcesContent":["const Emitter = require('mEmitter');\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        isRight: false,\n        isLeft: false,\n        isJump: false,\n        distan: 0,\n        firstPos: null,\n        btnReset: cc.Button,\n        btnRight: cc.Button,\n        btnLeft: cc.Button,\n        btnJump: cc.Button,\n    },\n    onLoad() {\n        Emitter.instance = new Emitter();\n        this.firstPos = this.node.position;\n        Emitter.instance.registerEvent(\"RIGHT\", this.moveRight.bind(this));\n        Emitter.instance.registerOnce(\"LEFT\", this.moveLeft.bind(this));\n        Emitter.instance.registerEvent(\"JUMP\", this.jump.bind(this));\n        Emitter.instance.registerOnce(\"RESET\", this.reset.bind(this));\n    },\n    moveRight() {\n        this.isRight = true;\n        this.btnJump.interactable = false;\n        this.btnReset.interactable = false;\n        this.btnLeft.interactable = false;\n    },\n\n    moveLeft() {\n        this.isLeft = true;\n        this.btnJump.interactable = false;\n        this.btnRight.interactable = false;\n        this.btnReset.interactable = false;\n    },\n\n    jump() {\n        this.isJump = true;\n        this.btnReset.interactable = false;\n        this.btnRight.interactable = false;\n        this.btnLeft.interactable = false;\n    },\n\n    reset() {\n        this.node.position = this.firstPos;\n    },\n\n    resetBtn() {\n        this.btnJump.interactable = true;\n        this.btnRight.interactable = true;\n        this.btnLeft.interactable = true;\n        this.btnReset.interactable = true;\n    },\n\n    update(dt) {\n        if (this.isJump || this.isLeft || this.isRight) {\n            this.distan++;\n            if (this.isRight) {\n                this.node.scaleX = -1\n                this.node.x += 3;\n                if (this.distan == 100) {\n                    this.isRight = false;\n                    this.distan = 0;\n                    this.resetBtn();\n                }\n            }\n\n            if (this.isLeft) {\n                this.node.scaleX = 1\n                this.node.x -= 3;\n                if (this.distan == 100) {\n                    this.isLeft = false;\n                    this.distan = 0;\n                    this.resetBtn();\n                }\n            }\n\n            if (this.isJump) {\n                if (this.distan <= 100) {\n                    this.node.y += 2;\n                    if (this.node.y >= 80) {\n                        this.node.angle += 4.7;\n                    }\n                } else if (this.distan > 100 && this.distan < 200) {\n                    this.node.y -= 2;\n                    this.node.angle = 0;\n                } else if (this.distan == 200) {\n                    this.distan = 0;\n                    this.node.y = this.firstPos.y;\n                    this.isJump = false;\n                    this.resetBtn();\n                }\n            }\n        }\n    },\n});"]}